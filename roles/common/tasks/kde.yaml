- name: Install KDE Plasma
  ansible.builtin.apt:
    name: kubuntu-desktop 
    state: present

- name: Install KDE applications
  ansible.builtin.apt:
    pkg:
      - kontact 
      - kmail
    state: present

- name: Create Konsole profile directory
  ansible.builtin.file:
    path: "/home/{{ local_user }}/.local/share/konsole"
    mode: "0775"
    state: directory

- name: Copy Konsole profile
  ansible.builtin.copy:
    src: "kde/konsole/dm432.profile"
    dest: "/home/{{ local_user }}/.local/share/konsole"
    mode: "0644"

- name: Download Orchis-kde theme
  ansible.builtin.git:
    repo: "https://github.com/vinceliuice/Orchis-kde"
    dest: "/tmp/Orchis-kde"
    depth: 1

- name: Copy Orchis-dark look-and-feel
  ansible.builtin.copy:
    src: "/tmp/Orchis-kde/plasma/look-and-feel/com.github.vinceliuice.Orchis-dark/"
    dest: "/home/{{ local_user }}/.local/share/plasma/look-and-feel/com.github.vinceliuice.Orchis-dark/"

- name: Set Orchis-dark look-and-feel
  ansible.builtin.command: "lookandfeeltool -a \"/home/{{ local_user }}/.local/share/plasma/look-and-feel/com.github.vinceliuice.Orchis-dark\""

